generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("PRISMA_URL")
}

model Session {
  accessToken String @unique
  tokenType   String
  expiresAt   String
  userId      Int    @unique
  user        User   @relation(fields: [userId], references: [id], onDelete: Cascade, onUpdate: Cascade)
}

model User {
  id                 Int        @id @default(autoincrement())
  orderingExternalId Int        @unique
  firstName          String
  lastName           String
  email              String     @unique
  hash               String
  level              Int?
  publicId           String     @unique
  refreshToken       String     @unique
  sessions           Session[]
  businesses         Business[] @relation("MyUserBusinessTable")

  @@map("user")
}

model Business {
  id                 Int    @id @default(autoincrement())
  orderingExternalId Int    @unique
  publicId           String @unique
  name               String
  owners             User[] @relation("MyUserBusinessTable")

  @@map("business")
}

model Notification {
  id          Int      @id @default(autoincrement())
  type        String
  deviceId    String
  businessId  String
  scheduledAt DateTime @db.Timestamp()
  userId      Int

  @@map("notification")
}
